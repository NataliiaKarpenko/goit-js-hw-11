{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,uCCAAC,EAAAD,EAAA,S,uCAEOE,EA2BH,W,sBA3BSC,I,aAITC,KAAKC,EAAI,KACTD,KAAKE,KAAO,KACZF,KAAKG,SAAW,E,iBAGlBC,IAAA,qB,MAAA,WACE,IAAMC,EAAe,CACnBC,OAAQ,CACNL,EAAGD,KAAKC,EACRC,KAAMF,KAAKE,KACXC,SAAUH,KAAKG,SACfI,WAAY,QACZC,YAAa,aACbC,YAAY,IAIhB,OAAOC,EAAAC,QAAMC,IACX,GAA+BC,OAA5Bd,EAAWe,UAAU,SAA0BD,OAAnBd,EAAWgB,SAC1CV,E,OAIF,GA1BFW,EAAAC,EAAA,CADWnB,EACJ,YAAY,4BACnBkB,EAAAC,EAAA,CAFWnB,EAEJ,UAAU,sCAyBnBoB,QAAQC,IAAIrB,G,iBDvBNsB,EAAgBC,SAASC,cAAc,gBACvCC,EAAaF,SAASC,cAAc,YAEpCE,EAAa,IAAI1B,E,SAKR2B,I,OAAAA,EAAfT,EAAArB,EAAA,CAAAqB,EAAAU,GAAAC,MAAA,SAAAC,EAAkCC,G,IAOxBC,EACEC,E,yEAPVF,EAAEG,iBAEFR,EAAWvB,EAAI4B,EAAEI,OAAOC,SAASC,YAAYC,MAC7CZ,EAAWtB,KAAO,E,kBAGOsB,EAAWa,qB,UAA5BP,EAAQQ,EAAAC,KAGW,KAFnBR,EAAWD,EAATC,MAECS,KAAKC,OAAY,C,uBACxBC,EAAAC,OAAOC,QACL,4EAEFf,EAAEI,OAAOY,QACTtB,EAAWuB,UAAY,G,2BAIzBJ,EAAAC,OAAOI,QAAQ,oBAAmClC,OAAfkB,EAAKiB,UAAU,aAClDzB,EAAWuB,WAAY,EAAAG,EAAAC,eAAcnB,EAAKS,MAC1C,IAAIxB,EAAAmC,GAAJ,CAAmB,c,kDAEnBjC,QAAQC,IAAGmB,EAAAc,I,2DAvBkBC,MAAArD,KAAAsD,U,UA2BlBC,I,OAAAA,EAAfvC,EAAArB,EAAA,CAAAqB,EAAAU,GAAAC,MAAA,SAAAC,EAA8BC,G,IAQlBC,EACEC,E,uEAPVyB,OAAOC,QAAUD,OAAOE,aACxBrC,SAASsC,gBAAgBC,cAAY,C,uBAErCpC,EAAWtB,MAAQ,E,kBAGMsB,EAAWa,qB,OAA5BP,EAAQQ,EAAAC,MACRR,EAAWD,EAATC,MAECiB,UAAYxB,EAAWrB,SAAWqB,EAAWtB,MAAQ,GAC5DwC,EAAAC,OAAOkB,QACL,8DAIJtC,EAAWuC,mBAAmB,aAAa,EAAAb,EAAAC,eAAcnB,EAAKS,OAC9D,IAAIxB,EAAAmC,GAAJ,CAAmB,cAAcY,U,kDAEjC7C,QAAQC,IAAGmB,EAAAc,I,2DApBYC,MAAArD,KAAAsD,U,CA9B7BlC,EAAc4C,iBAAiB,U,SAGGnC,G,OAAnBJ,EAAkB4B,MAAArD,KAAAsD,U,IAFjCE,OAAOQ,iBAAiB,U,SA6BMnC,G,OAAf0B,EAAcF,MAAArD,KAAAsD,U","sources":["src/js/infinite-scroll.js","src/js/pixabay-api-infinite-scroll.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { PixabayAPI } from './pixabay-api-infinite-scroll';\nimport { createGallery } from './create-gallery';\n\nconst searchFormRef = document.querySelector('.search-form');\nconst galleryRef = document.querySelector('.gallery');\n\nconst pixabayApi = new PixabayAPI();\n\nsearchFormRef.addEventListener('submit', onSearchFormSubmit);\nwindow.addEventListener('scroll', onWindowScroll);\n\nasync function onSearchFormSubmit(e) {\n  e.preventDefault();\n\n  pixabayApi.q = e.target.elements.searchQuery.value;\n  pixabayApi.page = 1;\n\n  try {\n    const response = await pixabayApi.fetchPhotosByQuery();\n    const { data } = response;\n\n    if (data.hits.length === 0) {\n      Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      e.target.reset();\n      galleryRef.innerHTML = '';\n      return;\n    }\n\n    Notify.success(`Hooray! We found ${data.totalHits} images.`);\n    galleryRef.innerHTML = createGallery(data.hits);\n    new SimpleLightbox('.gallery a');\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nasync function onWindowScroll(e) {\n  if (\n    window.scrollY + window.innerHeight >=\n    document.documentElement.scrollHeight\n  ) {\n    pixabayApi.page += 1;\n\n    try {\n      const response = await pixabayApi.fetchPhotosByQuery();\n      const { data } = response;\n\n      if (data.totalHits - pixabayApi.per_page * pixabayApi.page <= 0) {\n        Notify.warning(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n      }\n\n      galleryRef.insertAdjacentHTML('beforeend', createGallery(data.hits));\n      new SimpleLightbox('.gallery a').refresh();\n    } catch (err) {\n      console.log(err);\n    }\n  }\n}\n","import axios from 'axios';\n\nexport class PixabayAPI {\n  static BASIC_URL = 'https://pixabay.com/api/';\n  static API_KEY = '33069877-56d6b4be23d42e6d3f03db65c';\n  constructor() {\n    this.q = null;\n    this.page = null;\n    this.per_page = 10;\n  }\n\n  fetchPhotosByQuery() {\n    const searchParams = {\n      params: {\n        q: this.q,\n        page: this.page,\n        per_page: this.per_page,\n        image_type: 'photo',\n        orientation: 'horisontal',\n        safesearch: true,\n      },\n    };\n\n    return axios.get(\n      `${PixabayAPI.BASIC_URL}?key=${PixabayAPI.API_KEY}`,\n      searchParams\n    );\n  }\n}\nconsole.log(PixabayAPI);\n"],"names":["$bpxeT","parcelRequire","$8MBJY","$0db862c289dc480f$export$4fcfbd750f3dd343","PixabayAPI","this","q","page","per_page","key","searchParams","params","image_type","orientation","safesearch","$dIxxU","default","get","concat","BASIC_URL","API_KEY","$parcel$interopDefault","$hKHmD","console","log","$93b54f497d416715$var$searchFormRef","document","querySelector","$93b54f497d416715$var$galleryRef","$93b54f497d416715$var$pixabayApi","$93b54f497d416715$var$_onSearchFormSubmit","$2TvXO","mark","_callee","e","response","data","preventDefault","target","elements","searchQuery","value","fetchPhotosByQuery","_ctx","sent","hits","length","$h6c0i","Notify","failure","reset","innerHTML","success","totalHits","$6MX1w","createGallery","$5IjG7","t0","apply","arguments","$93b54f497d416715$var$_onWindowScroll","window","scrollY","innerHeight","documentElement","scrollHeight","warning","insertAdjacentHTML","refresh","addEventListener"],"version":3,"file":"infinite-scroll.8ed7f2be.js.map"}