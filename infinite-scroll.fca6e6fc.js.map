{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,aCAAC,EAAAD,EAAA,S,aAEO,MAAME,EASXC,qBACE,MAAMC,EAAe,CACnBC,OAAQ,CACNC,EAAGC,KAAKD,EACRE,KAAMD,KAAKC,KACXC,SAAUF,KAAKE,SACfC,WAAY,QACZC,YAAa,aACbC,YAAY,IAIhB,OAAOC,EAAAC,QAAMC,IACX,GAAGb,EAAWc,iBAAiBd,EAAWe,UAC1Cb,E,CApBJc,cACEX,KAAKD,EAAI,KACTC,KAAKC,KAAO,KACZD,KAAKE,SAAW,E,ECRb,SAASU,EAAcC,GAyB5B,OAxBmBA,EAAUC,KAAIC,GACxB,oCACsBA,EAAKC,iEAEpBD,EAAKE,uBAAuBF,EAAKG,2GAG3BH,EAAKI,6EAGLJ,EAAKK,gFAGFL,EAAKM,oFAGJN,EAAKO,gEAQbC,KAAK,G,CDtBvBC,EAAA9B,EAAA,CADWC,EACJ,YAAY,4BACnB6B,EAAA9B,EAAA,CAFWC,EAEJ,UAAU,sCAyBnB8B,QAAQC,IAAI/B,GDvBZ,MAAMgC,EAAgBC,SAASC,cAAc,gBACvCC,EAAaF,SAASC,cAAc,YAEpCE,EAAa,IAAIpC,EAEvBgC,EAAcK,iBAAiB,UAG/BC,eAAkCC,GAChCA,EAAEC,iBAEFJ,EAAWhC,EAAImC,EAAEE,OAAOC,SAASC,YAAYC,MAC7CR,EAAW9B,KAAO,EAElB,IACE,MAAMuC,QAAiBT,EAAWnC,sBAC5B6C,KAAEA,GAASD,EAEjB,GAAyB,IAArBC,EAAKC,KAAKC,OAMZ,OALAnD,EAAAoD,OAAOC,QACL,4EAEFX,EAAEE,OAAOU,aACThB,EAAWiB,UAAY,IAIzBvD,EAAAoD,OAAOI,QAAQ,oBAAoBP,EAAKQ,qBACxCnB,EAAWiB,UAAYnC,EAAc6B,EAAKC,MAC1C,IAAIlB,EAAA0B,GAAJ,CAAmB,a,CACnB,MAAOC,GACP1B,QAAQC,IAAIyB,E,KAzBhBC,OAAOpB,iBAAiB,UA6BxBC,eAA8BC,GAC5B,GACEkB,OAAOC,QAAUD,OAAOE,aACxB1B,SAAS2B,gBAAgBC,aACzB,CACAzB,EAAW9B,MAAQ,EAEnB,IACE,MAAMuC,QAAiBT,EAAWnC,sBAC5B6C,KAAEA,GAASD,EAEbC,EAAKQ,UAAYlB,EAAW7B,SAAW6B,EAAW9B,MAAQ,GAC5DT,EAAAoD,OAAOa,QACL,8DAIJ3B,EAAW4B,mBAAmB,YAAa9C,EAAc6B,EAAKC,OAC9D,IAAIlB,EAAA0B,GAAJ,CAAmB,cAAcS,S,CACjC,MAAOR,GACP1B,QAAQC,IAAIyB,E","sources":["src/js/gallery/infinite-scroll.js","src/js/gallery/pixabay-api-infinite-scroll.js","src/js/gallery/create-gallery.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { PixabayAPI } from './pixabay-api-infinite-scroll';\nimport { createGallery } from './create-gallery';\n\nconst searchFormRef = document.querySelector('.search-form');\nconst galleryRef = document.querySelector('.gallery');\n\nconst pixabayApi = new PixabayAPI();\n\nsearchFormRef.addEventListener('submit', onSearchFormSubmit);\nwindow.addEventListener('scroll', onWindowScroll);\n\nasync function onSearchFormSubmit(e) {\n  e.preventDefault();\n\n  pixabayApi.q = e.target.elements.searchQuery.value;\n  pixabayApi.page = 1;\n\n  try {\n    const response = await pixabayApi.fetchPhotosByQuery();\n    const { data } = response;\n\n    if (data.hits.length === 0) {\n      Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      e.target.reset();\n      galleryRef.innerHTML = '';\n      return;\n    }\n\n    Notify.success(`Hooray! We found ${data.totalHits} images.`);\n    galleryRef.innerHTML = createGallery(data.hits);\n    new SimpleLightbox('.gallery a');\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nasync function onWindowScroll(e) {\n  if (\n    window.scrollY + window.innerHeight >=\n    document.documentElement.scrollHeight\n  ) {\n    pixabayApi.page += 1;\n\n    try {\n      const response = await pixabayApi.fetchPhotosByQuery();\n      const { data } = response;\n\n      if (data.totalHits - pixabayApi.per_page * pixabayApi.page <= 0) {\n        Notify.warning(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n      }\n\n      galleryRef.insertAdjacentHTML('beforeend', createGallery(data.hits));\n      new SimpleLightbox('.gallery a').refresh();\n    } catch (err) {\n      console.log(err);\n    }\n  }\n}\n","import axios from 'axios';\n\nexport class PixabayAPI {\n  static BASIC_URL = 'https://pixabay.com/api/';\n  static API_KEY = '33069877-56d6b4be23d42e6d3f03db65c';\n  constructor() {\n    this.q = null;\n    this.page = null;\n    this.per_page = 10;\n  }\n\n  fetchPhotosByQuery() {\n    const searchParams = {\n      params: {\n        q: this.q,\n        page: this.page,\n        per_page: this.per_page,\n        image_type: 'photo',\n        orientation: 'horisontal',\n        safesearch: true,\n      },\n    };\n\n    return axios.get(\n      `${PixabayAPI.BASIC_URL}?key=${PixabayAPI.API_KEY}`,\n      searchParams\n    );\n  }\n}\nconsole.log(PixabayAPI);\n","export function createGallery(cardsInfo) {\n  const galleryArr = cardsInfo.map(card => {\n    return `\n  <a class =\"photo-link\" href=\"${card.webformatURL}\">\n    <div class=\"photo-card\">\n      <img src=\"${card.largeImageURL}\" alt=\"${card.tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes</b>${card.likes}\n        </p>\n        <p class=\"info-item\">\n          <b>Views</b>${card.views}\n        </p>\n        <p class=\"info-item\">\n          <b>Comments</b>${card.comments}\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads</b>${card.downloads}\n        </p>\n      </div>\n    </div>\n  </a>\n`;\n  });\n\n  return galleryArr.join('');\n}\n"],"names":["$iQIUW","parcelRequire","$iJYdK","$83e48c80c094a108$export$4fcfbd750f3dd343","fetchPhotosByQuery","searchParams","params","q","this","page","per_page","image_type","orientation","safesearch","$2shzp","default","get","BASIC_URL","API_KEY","constructor","$e5263405908797b7$export$dac8b9bf675ebb55","cardsInfo","map","card","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","$parcel$interopDefault","console","log","$359818ace1cce5c9$var$searchFormRef","document","querySelector","$359818ace1cce5c9$var$galleryRef","$359818ace1cce5c9$var$pixabayApi","addEventListener","async","e","preventDefault","target","elements","searchQuery","value","response","data","hits","length","Notify","failure","reset","innerHTML","success","totalHits","$fZKcF","err","window","scrollY","innerHeight","documentElement","scrollHeight","warning","insertAdjacentHTML","refresh"],"version":3,"file":"infinite-scroll.fca6e6fc.js.map"}