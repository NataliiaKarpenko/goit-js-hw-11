{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,aCAAC,EAAAD,EAAA,S,aAEO,MAAME,EASXC,qBACE,MAAMC,EAAe,CACnBC,OAAQ,CACNC,EAAGC,KAAKD,EACRE,KAAMD,KAAKC,KACXC,SAAUF,KAAKE,SACfC,WAAY,QACZC,YAAa,aACbC,YAAY,IAIhB,OAAOC,EAAAC,QAAMC,IACX,GAAGb,EAAWc,iBAAiBd,EAAWe,UAC1Cb,E,CApBJc,cACEX,KAAKC,KAAO,KACZD,KAAKD,EAAI,KACTC,KAAKE,SAAW,E,EALlBU,EAAAlB,EAAA,CADWC,EACJ,YAAY,4BACnBiB,EAAAlB,EAAA,CAFWC,EAEJ,UAAU,sC,iBCJZ,SAASkB,IACd,MAAQC,OAAQC,GAAeC,SAC5BC,cAAc,YACdC,kBAAkBC,wBAErBC,OAAOC,SAAS,CACdC,IAAkB,EAAbP,EACLQ,SAAU,U,CFAd,MAAMC,EAAgBR,SAASC,cAAc,gBACvCQ,EAAaT,SAASC,cAAc,YACpCS,EAAiBV,SAASC,cAAc,cAExCU,EAAa,IAAIhC,EAEvB6B,EAAcI,iBAAiB,UAG/BC,eAAkCC,GAChCA,EAAEC,iBAEFJ,EAAW5B,EAAI+B,EAAEE,OAAOC,SAASC,YAAYC,MAC7CR,EAAW1B,KAAO,EAElB,IACE,MAAMmC,QAAiBT,EAAW/B,sBAC5ByC,KAAEA,GAASD,EAEjB,GAAyB,IAArBC,EAAKC,KAAKC,OAOZ,OANA/C,EAAAgD,OAAOC,QACL,4EAEFX,EAAEE,OAAOU,QACTjB,EAAWkB,UAAY,QACvBjB,EAAekB,UAAUC,IAAI,mBAI3BR,EAAKS,UAAY,IACnBpB,EAAekB,UAAUG,OAAO,mBAGlCvD,EAAAgD,OAAOQ,QAAQ,oBAAoBX,EAAKS,qBACxCrB,EAAWkB,WAAY,EAAAM,EAAAC,eAAcb,EAAKC,MAC1CzB,IACA,IAAID,EAAAuC,GAAJ,CAAmB,a,CACnB,MAAOC,GACPC,QAAQC,IAAIF,E,KA/BhB1B,EAAeE,iBAAiB,SAmChCC,eAAkCC,GAChCH,EAAW1B,MAAQ,EAEnB,IACE,MAAMmC,QAAiBT,EAAW/B,sBAC5ByC,KAAEA,GAASD,EACbC,EAAKS,UAAYnB,EAAWzB,SAAWyB,EAAW1B,MAAQ,IAC5DT,EAAAgD,OAAOe,QACL,8DAEF7B,EAAekB,UAAUC,IAAI,oBAG/BpB,EAAW+B,mBAAmB,aAAa,EAAAP,EAAAC,eAAcb,EAAKC,OAC9DzB,IACA,IAAID,EAAAuC,GAAJ,CAAmB,cAAcM,S,CACjC,MAAOL,GACPC,QAAQC,IAAIF,E","sources":["src/js/smooth-scroll.js","src/js/pixabay-api.js","src/js/handle-window-scroll.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { PixabayAPI } from './pixabay-api';\nimport { createGallery } from './create-gallery';\nimport { handleWindowScroll } from './handle-window-scroll';\n\nconst searchFormRef = document.querySelector('.search-form');\nconst galleryRef = document.querySelector('.gallery');\nconst loadMoreBtnRef = document.querySelector('.load-more');\n\nconst pixabayApi = new PixabayAPI();\n\nsearchFormRef.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnRef.addEventListener('click', onLoadMoreBtnClick);\n\nasync function onSearchFormSubmit(e) {\n  e.preventDefault();\n\n  pixabayApi.q = e.target.elements.searchQuery.value;\n  pixabayApi.page = 1;\n\n  try {\n    const response = await pixabayApi.fetchPhotosByQuery();\n    const { data } = response;\n\n    if (data.hits.length === 0) {\n      Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      e.target.reset();\n      galleryRef.innerHTML = '';\n      loadMoreBtnRef.classList.add('visually-hidden');\n      return;\n    }\n\n    if (data.totalHits > 40) {\n      loadMoreBtnRef.classList.remove('visually-hidden');\n    }\n\n    Notify.success(`Hooray! We found ${data.totalHits} images.`);\n    galleryRef.innerHTML = createGallery(data.hits);\n    handleWindowScroll();\n    new SimpleLightbox('.gallery a');\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nasync function onLoadMoreBtnClick(e) {\n  pixabayApi.page += 1;\n\n  try {\n    const response = await pixabayApi.fetchPhotosByQuery();\n    const { data } = response;\n    if (data.totalHits - pixabayApi.per_page * pixabayApi.page <= 0) {\n      Notify.warning(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n      loadMoreBtnRef.classList.add('visually-hidden');\n    }\n\n    galleryRef.insertAdjacentHTML('beforeend', createGallery(data.hits));\n    handleWindowScroll();\n    new SimpleLightbox('.gallery a').refresh();\n  } catch (err) {\n    console.log(err);\n  }\n}\n","import axios from 'axios';\n\nexport class PixabayAPI {\n  static BASIC_URL = 'https://pixabay.com/api/';\n  static API_KEY = '33069877-56d6b4be23d42e6d3f03db65c';\n  constructor() {\n    this.page = null;\n    this.q = null;\n    this.per_page = 40;\n  }\n\n  fetchPhotosByQuery() {\n    const searchParams = {\n      params: {\n        q: this.q,\n        page: this.page,\n        per_page: this.per_page,\n        image_type: 'photo',\n        orientation: 'horisontal',\n        safesearch: true,\n      },\n    };\n\n    return axios.get(\n      `${PixabayAPI.BASIC_URL}?key=${PixabayAPI.API_KEY}`,\n      searchParams\n    );\n  }\n}\n","export function handleWindowScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$iQIUW","parcelRequire","$iJYdK","$48dbad9f66584f01$export$4fcfbd750f3dd343","fetchPhotosByQuery","searchParams","params","q","this","page","per_page","image_type","orientation","safesearch","$2shzp","default","get","BASIC_URL","API_KEY","constructor","$parcel$interopDefault","$e87980b1fe69a1af$export$597b6f74b98788c","height","cardHeight","document","querySelector","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$b290ce4b27986b20$var$searchFormRef","$b290ce4b27986b20$var$galleryRef","$b290ce4b27986b20$var$loadMoreBtnRef","$b290ce4b27986b20$var$pixabayApi","addEventListener","async","e","preventDefault","target","elements","searchQuery","value","response","data","hits","length","Notify","failure","reset","innerHTML","classList","add","totalHits","remove","success","$9Zl8s","createGallery","$fZKcF","err","console","log","warning","insertAdjacentHTML","refresh"],"version":3,"file":"smooth-scroll.e4abcd2b.js.map"}